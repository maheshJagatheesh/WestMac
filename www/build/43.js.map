{"version":3,"sources":["../../src/pages/notify-parents/notify-parents.module.ts","../../src/pages/notify-parents/notify-parents.ts"],"names":[],"mappings":"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","file":"43.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NotifyParentsPage } from './notify-parents';\n\n@NgModule({\n  declarations: [\n    NotifyParentsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(NotifyParentsPage),\n  ],\n})\nexport class NotifyParentsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notify-parents/notify-parents.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController,LoadingController } from 'ionic-angular';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { GlobalProvider } from '../../providers/global/global';\nimport { AppVersion } from '@ionic-native/app-version/ngx';\nimport { GlobalFunctionsProvider } from '../../providers/global-functions/global-functions';\nimport { Storage } from '@ionic/storage';\nimport { GlobalApiProvider } from '../../providers/global-api/global-api';\n@IonicPage()\n@Component({\n  selector: 'page-notify-parents',\n  templateUrl: 'notify-parents.html',\n})\nexport class NotifyParentsPage {\n  characters:any=86;\n  text:any=''\n  AppName:any\n  vehicleDetails:any;\n  PersonData:any;\n  staffDetails:any;\n  constructor(public navCtrl: NavController, public navParams: NavParams,public http: HttpClient,public storage: Storage,\n    public global: GlobalProvider,private appVersion: AppVersion, public viewCtrl:ViewController,public gFn:GlobalFunctionsProvider,\n    public loadingCtrl:LoadingController,public global_api:GlobalApiProvider) {\n      this.vehicleDetails=navParams.get('details')\n      // console.log(this.vehicleDetails)\n      this.appVersion.getAppName().then(Appname=>{\n      this.AppName=Appname\n    })\n    this.storage.get('loggedInUserData').then((val) => {\n      this.PersonData = val;\n      for(var key in this.vehicleDetails.staffList){\n        if( this.vehicleDetails.staffList[key].PERSONID== this.PersonData.PERSON_ID){\n          this.staffDetails=this.vehicleDetails.staffList[key]\n          // console.log(this.staffDetails)\n        }\n      }\n      if(!this.staffDetails){\n        this.gFn.presentToast('Unauthorized access')\n        this.viewCtrl.dismiss()\n      }\n    })\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad NotifyParentsPage');\n  }\n  close(event){\n    if(event.toElement.className==\"scroll-content\"){\n     this.navCtrl.pop()\n    }\n   }\n   sendNotification(){\n    let loader = this.loadingCtrl.create({});\n    loader.present();\n    if(this.text && this.text.length<=86) {\n      let PlayersData = new HttpParams()\n        .set('transportStaffId',  this.staffDetails.TRANSPORTSTAFFID)\n        .set('transportVehicleId', this.vehicleDetails.vehiclesId)//this.PersonData.CLIENT_ID\n        .set('message', this.text)//this.PersonData.SELECTEDTEAM\n        .set('app_name',  this.global.App_id)\n      this.http.post(this.global.APIURL + \"transports/notifyParentsByStaff\", PlayersData,{headers:this.global_api.getHeader()})\n        .subscribe((data: any) => {\n          // console.log(data)\n          this.viewCtrl.dismiss()\n          if(data.SUCCESS && data.NOTIFYPARENTS){\n            this.gFn.presentToast('Notify successfull')\n            loader.dismiss();\n          }\n          else{\n            this.gFn.presentToast('Notify unsuccessfull')\n            loader.dismiss();\n          }\n\n\n        },error=>{\n          this.gFn.presentToast('Notify unsuccessfull')\n          loader.dismiss();\n          this.viewCtrl.dismiss()\n        })\n\n   }\n   else if(this.text && this.text.length>86){\n    this.gFn.presentToast('Message cannot be more than '+this.characters+' characters')\n    loader.dismiss();\n   }\n  \n    else{\n      this.gFn.presentToast('Message cannot be blank')\n      loader.dismiss();\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notify-parents/notify-parents.ts"],"sourceRoot":""}