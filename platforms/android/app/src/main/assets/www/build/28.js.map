{"version":3,"sources":["../../src/pages/rollcall-logs/rollcall-logs.module.ts","../../src/pages/rollcall-logs/rollcall-logs.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACG;AAUnD;IAAA;IAAqC,CAAC;IAAzB,sBAAsB;QARlC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,wEAAgB;aACjB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,wEAAgB,CAAC;aAC3C;SACF,CAAC;OACW,sBAAsB,CAAG;IAAD,6BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACZO;AACgC;AACZ;AACrB;AACsB;AAC6B;AAClB;AAO1E;IAaE,0BAAmB,OAAsB,EAAS,SAAoB,EAAQ,IAAgB,EAAS,OAAgB,EAC9G,MAAsB,EAAS,GAA4B,EAAS,SAA0B,EAAQ,UAA4B;QADxH,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAQ,SAAI,GAAJ,IAAI,CAAY;QAAS,YAAO,GAAP,OAAO,CAAS;QAC9G,WAAM,GAAN,MAAM,CAAgB;QAAS,QAAG,GAAH,GAAG,CAAyB;QAAS,cAAS,GAAT,SAAS,CAAiB;QAAQ,eAAU,GAAV,UAAU,CAAkB;QAZ3I,oBAAe,GAAK,EAAE;QACtB,2BAAsB,GAAK,GAAG,CAAC;QACvB,UAAK,GAAW,EAAE,CAAC;QAEnB,UAAK,GAAW,EAAE,CAAC;QACpB,WAAM,GAAW,EAAE,CAAC;QACnB,kBAAa,GAAU,EAAE,CAAC;QAClC,aAAQ,GAAS,KAAK,CAAC;QACvB,yBAAoB,GAAY,KAAK,CAAC;QAC9B,cAAS,GAAU,EAAE,CAAC;QAC9B,mBAAc,GAAK,GAAG;QAGlB,IAAI,CAAC,SAAS,GAAC,SAAS,CAAC,GAAG,CAAC,YAAY,CAAC;QAC1C,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;QAC7B,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,UAAU,CAAC;QAC/B,gDAAgD;QAChD,IAAI,CAAC,eAAe,EAAE;QACtB,IAAI,CAAC,gBAAgB,EAAE;IAC3B,CAAC;IAED,yCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;IACjD,CAAC;IACD,0CAAe,GAAf;QAAA,iBAuBC;QAtBC,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO;YACzB,IAAI,IAAI,GAAG,IAAI,wEAAU,EAAE;iBACxB,GAAG,CAAC,kBAAkB,EAAE,KAAI,CAAC,SAAS,CAAC,iBAAiB,CAAC;iBACzD,GAAG,CAAC,gBAAgB,EAAE,IAAI,IAAI,EAAE,CAAC,iBAAiB,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC;YAEpE,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,MAAM,GAAG,4BAA4B,EAAE,IAAI,EAAC,EAAC,OAAO,EAAC,KAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAC,CAAC;iBAC1G,SAAS,CAAC,UAAC,IAAS;gBACnB,IAAG,IAAI,CAAC,OAAO,EAAC;oBACd,KAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;oBAC5C,KAAI,CAAC,sBAAsB,GAAC,GAAG;oBAC/B,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;qBACG;oBACF,KAAI,CAAC,sBAAsB,GAAC,GAAG;oBAC/B,OAAO,CAAC,KAAK,CAAC,CAAC;iBAChB;YACH,CAAC,EAAE,eAAK;gBACN,KAAI,CAAC,sBAAsB,GAAC,GAAG;gBAC/B,OAAO,CAAC,KAAK,CAAC;YAChB,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;IAEJ,CAAC;IACD,2CAAgB,GAAhB;QAAA,iBAuBC;QAtBC,2CAA2C;QAC3C,qBAAqB;QACrB,IAAI,IAAI,GAAG,IAAI,wEAAU,EAAE;aACxB,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,CAAC,IAAI,CAAC,IAAI,CAAM,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,0BAA0B,EAAE,IAAI,EAAC,EAAC,OAAO,EAAC,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,EAAC,CAAC;aAC7G,SAAS,CAAC,kBAAQ;YACjB,qBAAqB;YACrB,IAAI,QAAQ,CAAC,OAAO,EAAE;gBACpB,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,gBAAgB,CAAC;gBAC/C,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;gBAChD,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;gBACjD,KAAI,CAAC,iBAAiB,GAAG,KAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC;gBAClE,KAAI,IAAI,GAAG,IAAI,KAAI,CAAC,iBAAiB,EAAC;oBACpC,IAAG,KAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,YAAY,CAAC,MAAM,GAAG,CAAC,EAAC;wBACrD,KAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;wBACjC,MAAM;qBACP;iBACF;aACF;QACH,CAAC,EAAE,eAAK;YACN,qBAAqB;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IACD,uCAAY,GAAZ,UAAa,KAAgB;QAA7B,iBAkBC;QAlBY,gCAAM,IAAI,CAAC,KAAK;QAC3B,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,UAAU,CAAC;YACT,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;gBACrB,KAAI,CAAC,GAAG,CAAC,YAAY,CAAC,sBAAsB,CAAC,CAAC;aAC/C;iBAAM;gBACL,IAAI,QAAQ,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAClC,cAAc,EACd,EAAE,KAAK,EAAE,KAAK,EAAE,EAChB;oBACE,qBAAqB,EAAE,IAAI;oBAC3B,YAAY,EAAE,IAAI;iBACnB,CACF,CAAC;gBACF,QAAQ,CAAC,OAAO,EAAE,CAAC;aACpB;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAED,wCAAa,GAAb,UAAc,SAAS,EAAC,YAA+C;QAAvE,iBAkDC;QAlDuB,8CAAa,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,YAAY;QACrE,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,OAAO,CAAC;QACrD,UAAU,CAAC;YACT,oBAAoB;YACpB,IAAI,CAAC,CAAC,SAAS,IAAI,YAAY,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,KAAI,CAAC,oBAAoB,CAAC,EAAE;gBAElF,IAAG,KAAI,CAAC,MAAM,IAAE,OAAO,EAAC;oBACtB,KAAI,CAAC,GAAG,CAAC,YAAY,CAAC,8BAA8B,CAAC,CAAC;iBACvD;qBACI,IAAG,KAAI,CAAC,MAAM,IAAE,gBAAgB,EAAC;oBACpC,KAAI,CAAC,cAAc,GAAC,IAAI;oBACxB,IAAG,CAAC,KAAI,CAAC,QAAQ,EAAC;wBAChB,KAAI,CAAC,QAAQ,GAAC,IAAI;qBACnB;yBACG;wBACF,KAAI,CAAC,QAAQ,GAAC,KAAK;qBACpB;iBACF;aAEF;iBAAM;gBAEL,KAAI,CAAC,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC;gBAE3C,IAAG,KAAI,CAAC,MAAM,IAAE,OAAO,EAAC;oBAEtB,IAAI,SAAS,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CACnC,eAAe,EACf,EAAE,KAAK,EAAE,KAAI,CAAC,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,iBAAiB,EAAE,KAAI,CAAC,iBAAiB,EAAE,EACtF;wBACE,qBAAqB,EAAE,IAAI;wBAC3B,YAAY,EAAE,IAAI;qBACnB,CACF,CAAC;oBACF,SAAS,CAAC,OAAO,EAAE,CAAC;iBAErB;qBACI,IAAG,KAAI,CAAC,MAAM,IAAE,gBAAgB,EAAC;oBACpC,KAAI,CAAC,cAAc,GAAC,GAAG;oBACvB,IAAG,CAAC,KAAI,CAAC,QAAQ,EAAC;wBAChB,KAAI,CAAC,QAAQ,GAAC,IAAI;qBACnB;yBACG;wBACF,KAAI,CAAC,QAAQ,GAAC,KAAK;qBACpB;iBAEF;aAGF;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IAED,yCAAc,GAAd,UAAe,KAAgB;QAA/B,iBAkBC;QAlBc,gCAAM,IAAI,CAAC,KAAK;QAC7B,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC;QACtB,UAAU,CAAC;YACT,KAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;gBACrB,KAAI,CAAC,GAAG,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;aACxC;iBAAM;gBACL,IAAI,UAAU,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CACpC,gBAAgB,EAChB,EAAE,KAAK,EAAE,KAAK,EAAE,EAChB;oBACE,qBAAqB,EAAE,IAAI;oBAC3B,YAAY,EAAE,IAAI;iBACnB,CACF,CAAC;gBACF,UAAU,CAAC,OAAO,EAAE,CAAC;aACtB;QACH,CAAC,EAAE,GAAG,CAAC,CAAC;IACV,CAAC;IACD,gCAAK,GAAL,UAAM,KAAK;QACV,IAAG,KAAK,CAAC,SAAS,CAAC,SAAS,IAAE,gBAAgB,EAAC;YAC9C,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE;SAClB;IACF,CAAC;IAzKU,gBAAgB;QAJ5B,gEAAS,CAAC;YACT,QAAQ,EAAE,oBAAoB;WACG;SAClC,CAAC;2MAc4B,wEAAwD,6FAAmC;YACtG,aAA0H;OAdhI,gBAAgB,CA2K5B;IAAD,CAAC;AAAA;SA3KY,gBAAgB,gB","file":"28.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { RollcallLogsPage } from './rollcall-logs';\n\n@NgModule({\n  declarations: [\n    RollcallLogsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(RollcallLogsPage),\n  ],\n})\nexport class RollcallLogsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rollcall-logs/rollcall-logs.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { HttpClient, HttpParams } from '@angular/common/http';\nimport { Storage } from '@ionic/storage';\nimport { GlobalProvider } from '../../providers/global/global';\nimport { GlobalFunctionsProvider } from '../../providers/global-functions/global-functions';\nimport { GlobalApiProvider } from '../../providers/global-api/global-api';\n\n@IonicPage()\n@Component({\n  selector: 'page-rollcall-logs',\n  templateUrl: 'rollcall-logs.html',\n})\nexport class RollcallLogsPage {\n  passenger:any;\n  rollCallLogList:any=[]\n  rollCallLogListSuccess:any='0';\n  private phone: string = '';\n  private emergencyContacts: any;\n  private email: string = '';\n  public active: string = '';\n  private playerDetails: any[] = [];\n  ShowLogs:boolean=false;\n  emergencyPhoneExists: boolean = false;\n  private relations: any[] = [];\n  NoContactFound:any='0'\n  constructor(public navCtrl: NavController, public navParams: NavParams,public http: HttpClient, public storage: Storage,\n    public global: GlobalProvider, public gFn: GlobalFunctionsProvider,private modalCtrl: ModalController,public global_api:GlobalApiProvider) {\n      this.passenger=navParams.get('passengers')\n      this.relations[1] = 'Parent';\n      this.relations[2] = 'Guardian';\n      // console.log(this.passenger.rollcallPersonsId)\n      this.getRollCallLogs()\n      this.getPlayerDetails()\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad RollcallLogsPage');\n  }\n  getRollCallLogs(){\n    return new Promise((resolve) => {\n      let Data = new HttpParams()\n        .set('rollcallPersonId', this.passenger.rollcallPersonsId)\n        .set('timeZoneOffset', new Date().getTimezoneOffset().toString());\n        \n      this.http.post(this.global.APIURL + \"transports/getRollcallLogs\", Data,{headers:this.global_api.getHeader()})\n        .subscribe((data: any) => {\n          if(data.SUCCESS){\n            this.rollCallLogList = data.GETROLLCALLLOGS;\n            this.rollCallLogListSuccess='1'\n            resolve(true);\n          }\n          else{\n            this.rollCallLogListSuccess='2'\n            resolve(false);\n          }\n        }, error => {\n          this.rollCallLogListSuccess='2'\n          resolve(false)\n        });\n    })\n\n  }\n  getPlayerDetails() {\n    // let loading = this.loadingCtrl.create();\n    // loading.present();\n    let data = new HttpParams()\n      .set('person_id', this.passenger.person_id);\n    this.http.post<any>(this.global.APIURL + 'players/getPersonDetails', data,{headers:this.global_api.getHeader()})\n      .subscribe(response => {\n        // loading.dismiss();\n        if (response.SUCCESS) {\n          this.playerDetails = response.GETPERSONDETAILS;\n          this.phone = this.playerDetails[0].phone_mobile;\n          this.email = this.playerDetails[0].email_address;\n          this.emergencyContacts = this.playerDetails[0].emergency_contacts;\n          for(let key in this.emergencyContacts){\n            if(this.emergencyContacts[key].phone_mobile.length > 0){\n              this.emergencyPhoneExists = true;\n              break;\n            }\n          }\n        }\n      }, error => {\n        // loading.dismiss();\n      });\n  }\n  showSMSModal(phone=this.phone) {\n    this.active = 'sms';\n    setTimeout(() => {\n      this.active = '';\n      if (phone.length == 0) {\n        this.gFn.presentToast('Phone number not set');\n      } else {\n        let smsModal = this.modalCtrl.create(\n          'SmsModalPage',\n          { phone: phone },\n          {\n            enableBackdropDismiss: true,\n            showBackdrop: true\n          }\n        );\n        smsModal.present();\n      }\n    }, 300);\n  }\n\n  showCallModal(emergency,phone_mobile=this.playerDetails[0].phone_mobile) {\n    this.active = emergency ? 'emergencyPhone' : 'phone';\n    setTimeout(() => {\n      // this.active = '';\n      if ((!emergency && phone_mobile == 0) || (emergency && !this.emergencyPhoneExists)) {\n        \n        if(this.active=='phone'){\n          this.gFn.presentToast('No associated contact found.');\n        }\n        else if(this.active=='emergencyPhone'){\n          this.NoContactFound='-1'\n          if(!this.ShowLogs){\n            this.ShowLogs=true\n          }\n          else{\n            this.ShowLogs=false\n          }\n        }\n\n      } else {\n        \n        this.phone = emergency ? '' : phone_mobile;\n        \n        if(this.active=='phone'){\n          \n          let callModal = this.modalCtrl.create(\n            'CallModalPage',\n            { phone: this.phone, emergency: emergency, emergencyContacts: this.emergencyContacts },\n            {\n              enableBackdropDismiss: true,\n              showBackdrop: true\n            }\n          );\n          callModal.present();\n\n        }\n        else if(this.active=='emergencyPhone'){\n          this.NoContactFound='1'\n          if(!this.ShowLogs){\n            this.ShowLogs=true\n          }\n          else{\n            this.ShowLogs=false\n          }\n\n        }\n        \n        \n      }\n    }, 300);\n  }\n\n  showEmailModal(email=this.email) {\n    this.active = 'email';\n    setTimeout(() => {\n      this.active = '';\n      if (email.length == 0) {\n        this.gFn.presentToast('Email not set');\n      } else {\n        let emailModal = this.modalCtrl.create(\n          'EmailModalPage',\n          { email: email },\n          {\n            enableBackdropDismiss: true,\n            showBackdrop: true\n          }\n        );\n        emailModal.present();\n      }\n    }, 300);\n  }\n  close(event){\n   if(event.toElement.className==\"scroll-content\"){\n    this.navCtrl.pop()\n   }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/rollcall-logs/rollcall-logs.ts"],"sourceRoot":""}